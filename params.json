{"name":"Manual de instalação do Sistema de Ouvidoria","tagline":"","body":"##Descrição do Produto\r\n\r\nO Sistema de Ouvidoria foi desenvolvido em plataforma livre e possibilitará que um cidadão, externo à organização ou empregado desta, submeta mensagens (denúncias, reclamações, críticas, sugestões) para análise e resposta da Ouvidoria da instituição. Isto permitirá que se mantenha aberto um canal de comunicação entre o cidadão e a instituição, auxiliando na identificação de problemas da organização. Através deste sistema a Ouvidoria da instituição poderá efetuar o diagnóstico e a análise dos acionamentos submetidos, visando a rápida solução de questionamentos. Será permitido ao cidadão acompanhar o andamento de seu acionamento através da internet ou de serviço de atendimento da Ouvidoria.\r\n\r\nO sistema permitirá a emissão de relatórios gerenciais, apresentando estatísticas dos dados consolidados, visando não só possibilitar melhorias no processo de atendimento da ouvidoria como, também, facilitar o diagnóstico dos problemas nos processos da organização. A área estratégica da Ouvidoria poderá acompanhar todo o processo de atendimento a um acionamento, podendo inclusive agir no processo de solução. O Sistema poderá ser utilizado por Organizações com estrutura orgânica compostas de vários órgãos ou por um único órgão.\r\n\r\n##Pré-requisitos\r\n\r\nMySQLServer 4.1.20 instalado;\r\nMySQL Administrator instalado;\r\nTomcat 5.0.28 instalado 1;\r\nJava 1.4.2;\r\nEclipse 3.6 ou superior instalado 1;\r\nBrowser Firefox 3.0 ou superior 2.\r\nMaven 2 3.\r\n\r\n1. A codificação padrão da aplicação deve ser “UTF-8”, esteja ela rodando dentro do Eclipse ou direto no servidor.\r\n2. Garantimos o correto funcionamento da aplicação neste browser. Para utilização de outros navegadores, deverão ser realizados testes para garantir a compatibilidade.\r\n3. O Maven é o responsável por manter as dependências de bibliotecas utilizadas pelo software.\r\n\r\nO software foi testado utilizando estas versões. A utilização de versões diferentes pode ocasionar erros.\r\nCaso você seja um usuário iniciante, sugerimos que você use o framework Demoiselle, disponível também no Portal Software Público. O Eclipse e o Maven vem instalado e integrado no framework. O Servidor Tomcat disponível no framework não é recomendado, sendo melhor utilizar em separado. Também é preciso que, ao fazer a instalação e configuração, o servidor tenha acesso à internet para que o Maven possa fazer download das bibliotecas utilizadas na aplicação.\r\n\t\r\n##Instalação\r\n\r\n##Banco de dados\r\n\r\nPasso 1: Baixe o script sistema_ouvidoria.sql na sessão de download\r\n\r\nPasso 2: Abra o MySQL Browser, escolha a opção OpenScript do menu File e selecione o arquivo sistema_ouvidoria.sql para que seja aberto;\r\n\r\n\t\r\n\r\n\t\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nPasso 3: Execute o script para a criação do banco de dados com os dados mínimos para configuração de um novo Órgão;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n##Aplicação\r\n\t\r\nPasso 1: Baixe os arquivos-fonte do Sistema Ouvidoria e faça a configuração do projeto no Eclipse apontando para o diretório onde serão armazenados. Para isso, abra o Eclipse, vá em “File → Import”. Abrirá a tela de seleção do tipo de importação a se fazer. Escolha a opção “Maven → Existing Maven Project”\r\n\r\n\r\nEm seguida, você irá indicar ao Eclipse, onde está o código fonte da aplicação. Indique a pasta onde está o código da aplicação baixado do portal. O Eclipse irá 'enxergar' o arquivo de configuração 'pom.xml'. Selecione o arquivo e clique em Finish. Após isso, o Eclipse irá verificar as dependências e fará o download automático das bibliotecas que você irá precisar.\r\n\r\n\r\nObs: O arquivo pom.xml do Maven, assim como outros arquivos de configuração, foram configurados para funcionamento da aplicação com o servidor Tomcat. Para utilização com outros servidores de aplicações, podem ser necessárias algumas alterações no arquivo, como por exemplo, remoção de bibliotecas que o servidor já possua.\r\n\r\nPasso 2: Configuração de banco nos arquivos context.xml e hibernate.cfg.xml com o nome do database, usuário e senha criados. Abra o arquivo 'context.xml' no caminho indicado na figura abaixo\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nProcure pelas linhas onde estão os parâmetros “username” e “password”. Nos valores destes parâmetros insira o nome de usuário e a senha que terão permissão de acesso ao banco de dados.\r\n\r\n           \r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nAgora, configure o arquivo 'hibernate.cfg.xml'. O arquivo está no caminho indicado na figura abaixo\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nConfigure a string de conexão da aplicação com o banco de dados. Insira também o 'username' e o 'password' para acesso ao banco de dados. Não se esqueça de mudar o parâmetro “Show Sql” para false caso não queria que ele seja impresso no console/log.\r\n\r\n\r\nPasso 3: Geração do pacote “ouvidoria.war” da aplicação Ouvidoria.\r\nAntes de gerar o pacote 'war', é interessante que você clique com o botão direito do mouse no nome do projeto (ouvidoria) e escolha a opção “Refresh”. Também é recomendado que você clique com o botão direito do mouse no arquivo 'pom.xml' e escolha a opção “Run as → Maven Clean”. Com isso, garantimos que o arquivo 'war' será gerado totalmente atualizado. Feito isso, clique com o botão direito do mouse no nome do projeto (Ouvidoria), escolha a opção “Export → War File”. Escolha o local onde o arquivo será criado e clique em “Finish”.\r\n\r\nPasso 4: Após gerar o arquivo ouvidoria.war, copie o mesmo para a pasta  “webapps” do Tomcat . \r\n\r\nPasso 5: É necessário configurar alguns parâmetros da JVM que serão usados na inicialização do Tomcat.\r\nPara um ambiente Linux, no diretório raiz do Tomcat, crie o arquivo setenv.sh (caso ainda não exista) e adicione a este arquivo a seguinte linha:\r\n\r\n\texport JAVA_OPTS=\"-server -Xms32M -Xmx256M\"\r\n\r\nCaso você tenha instalado em sua máquina, outra versão do java, é necessário também dizer ao Tomcat qual versão do Java deverá ser utilizada. Para isso, sugerimos que você procure por tutoriais adequados ao seu ambiente de trabalho, pois essa configuração varia de acordo com o sistema operacional e a versão do sistema instalado.\r\n\r\nPasso 6: Após iniciar o Tomcat, acesse a aplicação pelo browser.  O Tomcat, por padrão, responde as requisições na porta 8080. Portanto, se as únicas modificações feitas no arquivo context.xml foram a do usuário e senha do banco, o caminho para acesso será “http://localhost:8080/ouvidoria”.\r\n\r\n\r\n\r\n##Configurando um novo Órgão\r\n\r\nPasso 1: Para configurar uma nova Ouvidoria, você deverá acessar a aplicação com o usuário Administrador do Sistema (CPF → 11111111111, senha → 123). Para ter acesso ao menu “Acesso Restrito” é necessário alterar a URL substituindo o trecho “MainInternet” por “MainIntranet”:\r\n\r\nPasso 2: Após o acesso, configure os parâmetros gerais do sistema , acessando o \tmenu “Administrar/Parâmetros Gerais”.\r\n\r\nPasso 3: Verifique se o campo “Diretório raiz da aplicação” foi preenchido com uma estrutura de diretório válida, com permissões de leitura e escrita para o usuário do Tomcat (novamente, para saber como fazer isso, é necessário saber qual sistema operacional e versão do sistema você está usando e buscar por um tutorial adequado, pois essas configurações podem variar). Esse será o diretório de trabalho do sistema e será usado para criar os anexos e outros arquivos necessários. Também tenha o cuidado de colocar um endereço válido para o servidor de e-mail que será usado na aplicação. Por último, tenha o cuidado de incluir uma “/” ao final do caminho do diretório raiz da aplicação.\r\n\r\nPasso 4: Cadastre o um novo Órgão, acessando o menu “Administrar/Manter Órgãos”\r\n\t\r\n\r\n\r\nNesta parte da instalação, é preciso ter um cuidado especial com as datas de configuração do novo órgão criado. Tenha certeza que:\r\n– A data de Inicio da Operação seja maior que a Data de Fim de Cadastramento.\r\nA data de Inicio de Acionamento  seja maior que a Data de Inicio de Cadastramento.\r\nA data de Inicio Consulta de Resposta seja maior que a Data de Inicio de Acionamento\r\nPara as datas de fim, utilize a mesma lógica usada para as Datas de Início.\r\n\r\n\r\nPasso 5: Após o cadastro do novo órgão, atualize as configurações do órgão, acessando “Administrar/Manter >> Órgão”. Após isso clique no botão \t“Atualizar Configuração” pertinente ao Órgão cadastrado. Abaixo, explicações sobre os textos que são configuráveis e qual a finalidade de cada um.\r\n\r\n\r\n\t\r\n\r\n\r\n\r\n\r\n\r\nAbaixo, uma explicação para os demais campos de configuração:\r\n\r\nNotificar aos responsáveis por acionamento sem resposta / Hora/Minuto do Envio de Notificação (HH:MM) \r\nO sistema pode gerar um e-mail de cobrança para os responsáveis por responder aos acionamentos abertos no sistema. Juntamente com a mensagem de cobrança, é enviado o link de acesso direto a mensagem, bem como a situação em que ela se encontra. A mensagem é enviada diariamente, no horário indicado.\r\n\r\nÓrgão permite anexar arquivo ao acionamento / Tamanho máximo para arquivos anexos (em KB) \r\nÉ possível permitir que sejam anexados arquivos ao acionamento. Este campo habilita esta opção, e o tamanho máximo permitido para cada anexo. O tipo de arquivo que pode ser anexado é configurado na opção “Administrar → Parâmetros Gerais”\r\n\r\nÓrgão permite mensagem digitalizada no acionamento \r\nFunciona de maneira similar a opção anterior.\r\n\r\nÓrgão possui código de acesso \r\nIndica se o usuário receberá um código de acesso para consulta aos acionamentos. O código de acesso é gerado junto com o protocolo de atendimento\r\n\r\nExiste bloqueio por falhas na digitação do código de acesso /Número máximo de falhas no código de acesso /Tempo de bloqueio pelo código de acesso (em minutos)\r\nIndica se o sistema irá bloquear a consulta a um determinado protocolo, uma vez o código de acesso seja digitado errado. É necessário informar o número de tentativas erradas que irá resultar no bloqueio, e o tempo em minutos que este bloqueio irá funcionar.\r\n\r\nExiste bloqueio por falhas na digitação da pergunta para recuperação do código de acesso / Número máximo de falhas no código de acesso / Tempo de bloqueio pelo código de acesso (em minutos)\r\nSimilar a opção anterior.\r\n\r\nAtendente pode consultar mensagens durante o atendimento\r\nIndica se o usuário com perfil de “Atendente” poderá acessar o sistema e consultar acionamentos durante a realização de um atendimento a usuário. \r\n\t\r\n é exigido certificado digital para acesso ao órgão e a todos os sub-órgãos / é exigido certificado digital para acesso ao órgão e opcional para todos os sub-órgãos \r\n\r\nNome do diretório do órgão\r\nAqui é informado o diretório onde serão armazenados os dados do órgão criado. Note que o nome do diretório deve ser exatamente igual ao diretório criado, pois de outro modo, os anexos e imagens não serão salvos corretamente.\r\n\r\nURL para consulta de funcionários\r\n\r\nURL de suporte ao usuário \r\nIndica algum endereço internet/intranet que o usuário poderá acessar para ajudá-lo a fazer o acionamento de forma correta.\r\n\r\n\r\nRemetente dos e-mails que serão enviados pela aplicação \r\nO e-mail informado aqui será visualizado pelos usuários como o remetente de todas as mensagens do sistema. Geralmente é usado um e-mail corporativo como 'ouvidoria@orgao.br'. Não é recomendado o uso de um e-mail pessoal.\r\n\r\nTipos de acionador permitidos para o órgão\r\nIndica de que maneira o usuário poderá se identificar ao fazer um acionamento.\r\n\r\nMeios de envio de resposta permitidos para o órgão\r\n\r\nIndica que meio de comunicação o usuário pode informar para o recebimento de sua resposta.\r\n\r\n\r\n\t\t\r\nPasso 6\r\nApós o cadastro, altere a classe OrgãoCtrl.java configurando o código do órgão \t(variável orgaoId),\trecém cadastrado, da seguinte forma:\r\n\t\r\na) Obtenha o código do órgão recém cadastrado consultando o banco de dados \tda aplicação (tabela INSTITUICAO coluna COD_INSTIT).\r\n\r\nb) Vá novamente ao Eclipse, encontra a classe OrgãoCtrl.java e substitua o código de órgão existente pelo código de órgão da nova instituição. \r\n\t\r\n\t\r\n\t\r\n\r\n\r\n\t\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nFeita esta substituição, salve o arquivo e execute novamente o procedimento de criação do  pacote  'ouvidoria.war'\r\nEsta parte é um pouco trabalhosa, então vamos explicar detalhadamente. Não será feito um novo “Deploy” da aplicação. Iremos apenas gerar o código fonte novamente, desta vez com o código do órgão criado. Antes de gerar o novo arquivo “ouvidoria.war”, pare o servidor tomcat. \r\nUma vez parado o servidor, abra o arquivo 'ouvidoria.war' com um descompactador de arquivo (os arquivos '.war' na verdade são arquivos compactados para serem lidos por servidores web). Depois de descompatar os arquivos, substitua os arquivos da pasta '[diretório do tomcat]/webapps/ouvidoria/', pelos novos arquivos e em seguida apague o arquivo 'ouvidoria.war' (isto impede que o servidor enxergue o novo arquivo “.war” e faça um novo deploy da aplicação). Em seguida, no console do terminal, digite o comando 'touch /[diretório do tomcat]/webapps/ouvidoria/WEB-INF/web.xml”. Este comando irá modificar a data e hora do arquivo web-xml, e com isso o servidor tomcat irá atualizar a aplicação. Feito isso, basta reinicar o servidor tomcat.\r\n\t\r\nPasso 7\r\nPor fim, acesse novamente a aplicação e já estará usando o novo Órgão.\r\nPara acessar a parte de “acesso restrito”, como na figura, basta editar a url de   acesso no navegador, trocando a parte onde diz “MainInternet” para “MainIntranet”\r\n\t\r\n\r\nPasso 8\r\nPor fim, crie as informações necessárias para uso do sistema. A melhor ordem é se criar “Sub Órgão”, “Localidades”, “Tipos de Mensagens”, “Assuntos de \tMensagens”, “Usuários”, nessa ordem, de forma a atender todas as dependências \tpara o funcionamento do sistema. Obrigatoriamente, você precisa cadastrar um \tusuário no perfil “Ouvidor Geral”.\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}